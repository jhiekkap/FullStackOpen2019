{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","services_persons","newObject","axios","post","then","response","data","id","put","concat","delete","Filter","props","newFilter","handleNoteChange3","react_default","a","createElement","value","onChange","PersonForm","addPerson","newName","newNumber","handleNoteChange1","handleNoteChange2","onSubmit","type","Persons","_ref","showPersons","ErrorNotification","_ref2","message","className","OkNotification","_ref3","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setNewFilter","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","okMessage","setOkMessage","useEffect","console","log","get","length","App_ErrorNotification","App_OkNotification","App_Filter","event","target","App_PersonForm","preventDefault","map","person","name","includes","window","confirm","find","p","changedPerson","objectSpread","number","personService","returnedPerson","setTimeout","catch","error","filter","toLowerCase","match","key","onClick","returnedData","removePerson","ReactDOM","render","src_App","document","getElementById"],"mappings":"qOACMA,EAAU,eAsBDC,EAfA,SAAAC,GAEb,OADgBC,IAAMC,KAAKJ,EAASE,GACrBG,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAa5BN,EAVA,SAACO,EAAIN,GAElB,OADgBC,IAAMM,IAAN,GAAAC,OAAaV,EAAb,KAAAU,OAAwBF,GAAMN,GAC/BG,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAQ5BN,EALA,SAACO,GAEd,OADgBL,IAAMQ,OAAN,GAAAD,OAAgBV,EAAhB,KAAAU,OAA2BF,IAC5BH,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QChBrCK,EAAS,SAACC,GAAU,IAChBC,EAAiCD,EAAjCC,UAAWC,EAAsBF,EAAtBE,kBACnB,OACEC,EAAAC,EAAAC,cAAA,yCACIF,EAAAC,EAAAC,cAAA,SACAC,MAAOL,EACPM,SAAUL,MAKZM,EAAa,SAACR,GAAU,IAEpBS,EAAwET,EAAxES,UAAWC,EAA6DV,EAA7DU,QAASC,EAAoDX,EAApDW,UAAWC,EAAyCZ,EAAzCY,kBAAmBC,EAAsBb,EAAtBa,kBAC1D,OACEV,EAAAC,EAAAC,cAAA,QAAMS,SAAUL,GACdN,EAAAC,EAAAC,cAAA,mBAEIF,EAAAC,EAAAC,cAAA,SACAC,MAAOI,EACPH,SAAUK,KAGdT,EAAAC,EAAAC,cAAA,qBAEIF,EAAAC,EAAAC,cAAA,SACAC,MAAOK,EACPJ,SAAUM,KAGdV,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAQU,KAAK,UAAb,kBAKFC,EAAU,SAAAC,GACd,OAAOC,EAD4BD,EAAlBC,gBAIbC,EAAoB,SAAAC,GAAiB,IAAdC,EAAcD,EAAdC,QAC3B,OAAgB,OAAZA,EACK,KAGPlB,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,SACZD,IAIDE,EAAiB,SAAAC,GAAiB,IAAdH,EAAcG,EAAdH,QACxB,OAAgB,OAAZA,EACK,KAIPlB,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,MACZD,IAgLQI,EA3KH,WAAM,IAAAC,EAEcC,mBAAS,IAFvBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAETK,EAFSH,EAAA,GAEAI,EAFAJ,EAAA,GAAAK,EAScN,mBAAS,IATvBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GASTvB,EATSwB,EAAA,GASAC,EATAD,EAAA,GAAAE,EAUkBT,mBAAS,IAV3BU,EAAAR,OAAAC,EAAA,EAAAD,CAAAO,EAAA,GAUTzB,EAVS0B,EAAA,GAUEC,EAVFD,EAAA,GAAAE,EAWkBZ,mBAAS,IAX3Ba,EAAAX,OAAAC,EAAA,EAAAD,CAAAU,EAAA,GAWTtC,EAXSuC,EAAA,GAWEC,EAXFD,EAAA,GAAAE,EAYwBf,mBAAS,MAZjCgB,EAAAd,OAAAC,EAAA,EAAAD,CAAAa,EAAA,GAYTE,EAZSD,EAAA,GAYKE,EAZLF,EAAA,GAAAG,EAakBnB,mBAAS,MAb3BoB,EAAAlB,OAAAC,EAAA,EAAAD,CAAAiB,EAAA,GAaTE,EAbSD,EAAA,GAaEE,EAbFF,EAAA,GAehBG,oBAAU,WACRC,QAAQC,IAAI,UACZ9D,IACG+D,IAAI,gBACJ7D,KAAK,SAAAC,GACJ0D,QAAQC,IAAI,qBACZpB,EAAWvC,EAASC,SAEvB,IACHyD,QAAQC,IAAI,SAAUrB,EAAQuB,OAAQ,WA4HtC,OACEnD,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAACkD,EAAD,CAAmBlC,QAASuB,IAC5BzC,EAAAC,EAAAC,cAACmD,EAAD,CAAgBnC,QAAS2B,IACzB7C,EAAAC,EAAAC,cAACoD,EAAD,CACExD,UAAWA,EACXC,kBAvBoB,SAACwD,GACzBP,QAAQC,IAAIM,EAAMC,OAAOrD,OACzBmC,EAAaiB,EAAMC,OAAOrD,UAuBxBH,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAACuD,EAAD,CACEnD,UArIY,SAACiD,GAEjB,GADAA,EAAMG,iBACD9B,EAAQ+B,IAAI,SAAAC,GAAM,OAAIA,EAAOC,OAAMC,SAASvD,IA4B/C,GAAIwD,OAAOC,QAAP,GAAAtE,OAAkBa,EAAlB,6DAAsF,CAExF,IAAMqD,EAAShC,EAAQqC,KAAK,SAAAC,GAAC,OAAIA,EAAEL,OAAStD,IACtC4D,EAAazC,OAAA0C,EAAA,EAAA1C,CAAA,GAAQkC,EAAR,CAAgBS,OAAQ7D,IACvChB,EAAKoE,EAAOpE,GAChB8E,EACU9E,EAAI2E,GACX9E,KAAK,SAAAkF,GACJ1C,EAAWD,EAAQ+B,IAAI,SAAAC,GAAM,OAAIA,EAAOpE,KAAOA,EAAKoE,EAASW,KAC7DvC,EAAW,IACXG,EAAa,IACbW,EAAY,mBAAApD,OACMkE,EAAOC,OAEzBW,WAAW,WACT1B,EAAa,OACZ,OAEJ2B,MAAM,SAAAC,GACLvF,IACG+D,IAAI,gBACJ7D,KAAK,SAAAC,GACJ0D,QAAQC,IAAI,qBACZpB,EAAWvC,EAASC,QAExBmD,EAAe,cAAAhD,OACFkE,EAAOC,KADL,sBAGfW,WAAW,WACT9B,EAAgB,OACf,aArDT4B,EAJkB,CAChBT,KAAMtD,EACN8D,OAAQ7D,IAIPnB,KAAK,SAAAkF,GACJ1C,EAAWD,EAAQlC,OAAO6E,IAC1BvC,EAAW,IACXG,EAAa,IACbW,EAAY,gBAAApD,OACG6E,EAAeV,OAE9BW,WAAW,WACT1B,EAAa,OACZ,OAEJ2B,MAAM,SAAAC,GACLhC,EAAe,WAAAhD,OACFgF,EAAMpF,SAASC,KAAKmF,QAEjC1B,QAAQC,IAAI,mBAAmByB,EAAMpF,SAASC,KAAKmF,OACnDF,WAAW,WACT9B,EAAgB,OACf,QA2GLnC,QAASA,EACTC,UAAWA,EACXC,kBAtCoB,SAAC8C,GACzBP,QAAQC,IAAIM,EAAMC,OAAOrD,OACzB6B,EAAWuB,EAAMC,OAAOrD,QAqCpBO,kBAnCoB,SAAC6C,GACzBP,QAAQC,IAAIM,EAAMC,OAAOrD,OACzBgC,EAAaoB,EAAMC,OAAOrD,UAmCxBH,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAACW,EAAD,CAASE,YA9BO,WAIlB,OAFiBa,EAAQ+C,OAAO,SAAAf,GAAM,OAAIA,EAAOC,KAAKe,cAAcC,MAAM/E,EAAU8E,iBAEpEjB,IAAI,SAAAC,GAAM,OACxB5D,EAAAC,EAAAC,cAAA,KAAG4E,IAAKlB,EAAOpE,IACZoE,EAAOC,KAAO,IACdD,EAAOS,OACRrE,EAAAC,EAAAC,cAAA,UAAQ6E,QAAS,kBArDF,SAACnB,GAChBG,OAAOC,QAAP,gBAAAtE,OAA+BkE,EAAOC,KAAtC,OACFS,EACUV,EAAOpE,IACdH,KAAK,SAAA2F,GACJhC,QAAQC,IAAI,WAAY+B,GACxBnD,EAAWD,EAAQ+C,OAAO,SAAAT,GAAC,OAAIA,EAAE1E,KAAOoE,EAAOpE,MAC/CwC,EAAW,IACXG,EAAa,IACbW,EAAY,eAAApD,OACKkE,EAAOC,OAExBW,WAAW,WACT1B,EAAa,OACZ,OAEJ2B,MAAM,SAAAC,GACLvF,IACG+D,IAAI,qBACJ7D,KAAK,SAAAC,GACJ0D,QAAQC,IAAI,qBACZpB,EAAWvC,EAASC,QAExBmD,EAAe,cAAAhD,OACFkE,EAAOC,KADL,sBAGfW,WAAW,WACT9B,EAAgB,OACf,OAyBkBuC,CAAarB,KAApC,kBC5MRsB,IAASC,OAAOnF,EAAAC,EAAAC,cAACkF,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.c89fc2b7.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport personService from './services/persons'\n\nconst Filter = (props) => {\n  const { newFilter, handleNoteChange3 } = props\n  return (\n    <form> rajaa näytettävä\n        <input\n        value={newFilter}\n        onChange={handleNoteChange3}\n      />\n    </form>\n  )\n}\nconst PersonForm = (props) => {\n\n  const { addPerson, newName, newNumber, handleNoteChange1, handleNoteChange2 } = props\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        nimi:\n          <input\n          value={newName}\n          onChange={handleNoteChange1}\n        />\n      </div>\n      <div>\n        numero:\n          <input\n          value={newNumber}\n          onChange={handleNoteChange2}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">lisää</button>\n      </div>\n    </form>\n  )\n}\nconst Persons = ({ showPersons }) => {\n  return showPersons()\n}\n\nconst ErrorNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\nconst OkNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"ok\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n  /* const [persons, setPersons] = useState([\n    { name: 'Arto Hellas', number: '040-123456' },\n    { name: 'Martti Tienari', number: '040-123456' },\n    { name: 'Arto Järvinen', number: '040-123456' },\n    { name: 'Lea Kutvonen', number: '040-123456' }\n  ]) */\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [okMessage, setOkMessage] = useState(null)\n\n  useEffect(() => {\n    console.log('effect')\n    axios\n      .get('/api/persons')\n      .then(response => {\n        console.log('promise fulfilled')\n        setPersons(response.data)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons')\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    if (!persons.map(person => person.name).includes(newName)) {\n      const newPerson = {\n        name: newName,\n        number: newNumber\n      }\n      personService\n        .create(newPerson)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setOkMessage(\n            `Lisättiin ${returnedPerson.name}`\n          ) \n          setTimeout(() => {\n            setOkMessage(null) \n          }, 5000)\n        })\n        .catch(error => {\n          setErrorMessage(\n            `ERROR : ${error.response.data.error}`\n          )\n          console.log('FRONTTI ERRORI: ',error.response.data.error)\n          setTimeout(() => { \n            setErrorMessage(null)\n          }, 5000)\n        })\n    } else {\n      if (window.confirm(`${newName} on jo luettelossa, korvataanko vanha uudella numerolla?`)) {\n\n        const person = persons.find(p => p.name === newName)\n        const changedPerson = { ...person, number: newNumber }\n        let id = person.id\n        personService\n          .update(id, changedPerson)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n            setNewName('')\n            setNewNumber('')\n            setOkMessage(\n              `Päivitettiin ${person.name}`\n            )\n            setTimeout(() => {\n              setOkMessage(null)\n            }, 5000)\n          })\n          .catch(error => {\n            axios\n              .get('/api/persons')\n              .then(response => {\n                console.log('promise fulfilled')\n                setPersons(response.data)\n              })\n            setErrorMessage(\n              `Henkilö ${person.name} oli jo poistettu`\n            )\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n      }\n    }\n  }\n  const removePerson = (person) => {\n    if (window.confirm(`Poistetaanko ${person.name}?`)) {\n      personService\n        .remove(person.id)\n        .then(returnedData => {\n          console.log('removed:', returnedData)\n          setPersons(persons.filter(p => p.id !== person.id))\n          setNewName('')\n          setNewNumber('')\n          setOkMessage(\n            `Poistettiin ${person.name}`\n          )\n          setTimeout(() => {\n            setOkMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          axios\n            .get('http:/api/persons')\n            .then(response => {\n              console.log('promise fulfilled')\n              setPersons(response.data)\n            })\n          setErrorMessage(\n            `Henkilö ${person.name} oli jo poistettu`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    }\n  }\n\n  const handleNoteChange1 = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n  const handleNoteChange2 = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n  const handleNoteChange3 = (event) => {\n    console.log(event.target.value)\n    setNewFilter(event.target.value)\n  }\n  const showPersons = () => {\n\n    const filtered = persons.filter(person => person.name.toLowerCase().match(newFilter.toLowerCase()))\n\n    return filtered.map(person =>\n      <p key={person.id}>\n        {person.name + ' '}\n        {person.number}\n        <button onClick={() => removePerson(person)}>poista</button>\n      </p>)\n  }\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n      <ErrorNotification message={errorMessage} />\n      <OkNotification message={okMessage} />\n      <Filter\n        newFilter={newFilter}\n        handleNoteChange3={handleNoteChange3}\n      />\n      <h3>lisää uusi</h3>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        handleNoteChange1={handleNoteChange1}\n        handleNoteChange2={handleNoteChange2}\n      />\n      <h2>Numerot</h2>\n      <Persons showPersons={showPersons} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n \n\nReactDOM.render(<App />, document.getElementById('root'));\n\n "],"sourceRoot":""}